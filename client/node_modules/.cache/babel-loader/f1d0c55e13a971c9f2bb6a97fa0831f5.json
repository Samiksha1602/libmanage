{"ast":null,"code":"import _classCallCheck from\"D:/sakshi college/cc miniproject/lib_management/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/sakshi college/cc miniproject/lib_management/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/sakshi college/cc miniproject/lib_management/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/sakshi college/cc miniproject/lib_management/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Table}from'reactstrap';import{Link}from'react-router-dom';import Loading from'./LoadingComponent.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var fineRate=1;var allowedDays=30;function RenderIssue(_ref){var issue=_ref.issue,i=_ref.i;var dates=[];var today=new Date();dates.push(today);var issueDate=new Date(Date.parse(issue.createdAt));var deadline=new Date(Date.parse(issue.createdAt));deadline.setDate(deadline.getDate()+30);dates.push(deadline);var returnDate=issue.returned?new Date(Date.parse(issue.updatedAt)):new Date(Math.min.apply(null,dates));var fine=0;if((returnDate.getTime()-issueDate.getTime())/(1000*60*60*24)>allowedDays){fine=Math.floor((returnDate.getTime()-issueDate.getTime())/(1000*60*60*24))*fineRate;}return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"td\",{children:i}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"/users/\".concat(issue.student._id),children:issue.student.firstname+' '+issue.student.lastname})}),/*#__PURE__*/_jsx(\"td\",{children:issue.student.roll}),/*#__PURE__*/_jsx(\"td\",{children:issue.book==null?\"N/A\":/*#__PURE__*/_jsx(Link,{to:\"/books/\".concat(issue.book._id),children:issue.book.name})}),/*#__PURE__*/_jsx(\"td\",{children:issue.book==null?\"N/A\":issue.book.isbn}),/*#__PURE__*/_jsx(\"td\",{children:new Intl.DateTimeFormat('en-US',{year:'numeric',month:'short',day:'2-digit'}).format(new Date(Date.parse(issue.createdAt)))}),/*#__PURE__*/_jsx(\"td\",{children:new Intl.DateTimeFormat('en-US',{year:'numeric',month:'short',day:'2-digit'}).format(deadline)}),/*#__PURE__*/_jsx(\"td\",{children:issue.returned?'Returned on '+new Intl.DateTimeFormat('en-US',{year:'numeric',month:'short',day:'2-digit'}).format(new Date(Date.parse(returnDate))):'Not returned yet'}),/*#__PURE__*/_jsx(\"td\",{children:fine})]});}var Log=/*#__PURE__*/function(_Component){_inherits(Log,_Component);var _super=_createSuper(Log);function Log(props){var _this;_classCallCheck(this,Log);_this=_super.call(this,props);_this.state={};_this.i=1;return _this;}_createClass(Log,[{key:\"componentDidMount\",value:function componentDidMount(){window.scrollTo(0,0);}},{key:\"render\",value:function render(){var _this2=this;if(this.props.issues.isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(Loading,{})})});}else if(this.props.issues.errMess){return/*#__PURE__*/_jsx(\"div\",{className:\"container loading\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row heading\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h3\",{children:this.props.errMess})]})})});}else if(this.props.issues.issues.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"container loading\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row heading\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 text-center\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h4\",{children:'You have not issued any books.'}),/*#__PURE__*/_jsx(\"h4\",{children:'Request admin to issue a book'})]})})});}else{var list=this.props.issues.issues.map(function(issue){return/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(RenderIssue,{issue:issue,i:_this2.i++})},issue._id);});return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-6 text-center align-self-center full\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row text-center justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 heading\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Issue Log\"}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"S.No.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name of Student\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Roll No.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name of Book\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ISBN number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Issue Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Return Deadline\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Return status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Fine (in Rs.)\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:list})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]})})});}}}]);return Log;}(Component);export default Log;","map":{"version":3,"sources":["D:/sakshi college/cc miniproject/lib_management/client/src/components/LogComponent.js"],"names":["React","Component","Table","Link","Loading","fineRate","allowedDays","RenderIssue","issue","i","dates","today","Date","push","issueDate","parse","createdAt","deadline","setDate","getDate","returnDate","returned","updatedAt","Math","min","apply","fine","getTime","floor","student","_id","firstname","lastname","roll","book","name","isbn","Intl","DateTimeFormat","year","month","day","format","Log","props","state","window","scrollTo","issues","isLoading","errMess","length","list","map"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\r\nimport { Table } from 'reactstrap';\r\nimport {Link} from 'react-router-dom';\r\nimport Loading from './LoadingComponent.js';\r\n\r\nconst fineRate=1;\r\n\r\nconst allowedDays=30;\r\nfunction RenderIssue ({issue,i}) {\r\n    const dates=[];\r\n    const today= new Date();\r\n    dates.push(today);\r\n    const issueDate=new Date(Date.parse(issue.createdAt));\r\n    const deadline = new Date( Date.parse(issue.createdAt));\r\n    deadline.setDate(deadline.getDate()+30);\r\n    dates.push(deadline);\r\n    const returnDate=issue.returned?new Date(Date.parse((issue.updatedAt))):(new Date(Math.min.apply(null,dates)));\r\n    let fine=0;\r\n      if(((returnDate.getTime()-issueDate.getTime())/(1000 * 60 * 60 * 24))>allowedDays)\r\n      {\r\n        fine=Math.floor((returnDate.getTime()-issueDate.getTime())/(1000 * 60 * 60 * 24))*fineRate;\r\n      }\r\n    return (\r\n            <React.Fragment>\r\n            <td>\r\n            {i}\r\n            </td>\r\n            <td>\r\n            <Link to={`/users/${issue.student._id}`}>\r\n            {issue.student.firstname+' '+issue.student.lastname}\r\n            </Link>\r\n            </td>\r\n            <td>\r\n            {issue.student.roll}\r\n            </td>\r\n            <td>\r\n            {issue.book==null ? \"N/A\":<Link to={`/books/${issue.book._id}`}>\r\n            {issue.book.name}\r\n            </Link>}\r\n            </td>\r\n            <td>\r\n            {issue.book==null ? \"N/A\":issue.book.isbn}\r\n            </td>\r\n            <td>\r\n                {new Intl.DateTimeFormat('en-US',{year: 'numeric', month: 'short', day: '2-digit'}).format(new Date( Date.parse(issue.createdAt)))}\r\n            </td>\r\n            <td>\r\n                {new Intl.DateTimeFormat('en-US',{year: 'numeric', month: 'short', day: '2-digit'}).format(deadline)}\r\n            </td>\r\n            <td>\r\n                {\r\n        issue.returned?('Returned on '+(new Intl.DateTimeFormat('en-US',{year: 'numeric', month: 'short', day: '2-digit'}).format(new Date( Date.parse(returnDate)))))                    \r\n               :('Not returned yet')\r\n                }\r\n            </td>\r\n            <td>\r\n                {\r\n                    fine\r\n                }\r\n            </td>\r\n            </React.Fragment>\r\n       );\r\n}\r\n\r\nclass Log extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n         }\r\n        this.i=1; \r\n    }\r\n    componentDidMount() {\r\n        window.scrollTo(0, 0)\r\n      }\r\n\r\nrender(){\r\n\r\n    if (this.props.issues.isLoading) {\r\n        return(\r\n            <div className=\"container\">\r\n                <div className=\"row\">            \r\n                    <Loading />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    else if (this.props.issues.errMess) {\r\n        return(\r\n            <div className=\"container loading\">\r\n                <div className=\"row heading\"> \r\n                    <div className=\"col-12\">\r\n                        <br/><br/><br/><br/>\r\n                        <h3>{this.props.errMess}</h3>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    else if(this.props.issues.issues.length===0){\r\n        return (\r\n            <div className=\"container loading\">\r\n                <div className=\"row heading\"> \r\n                    <div className=\"col-12 text-center\">\r\n                        <br/><br/><br/><br/>\r\n                        <h4>{'You have not issued any books.'}</h4> \r\n                        <h4>{'Request admin to issue a book'}</h4>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    else {\r\n        const list = this.props.issues.issues.map((issue) => {\r\n            return (\r\n                    <tr key={issue._id}>\r\n                        <RenderIssue issue={issue} \r\n                                     i={this.i++}\r\n                        />\r\n                    </tr>\r\n            );\r\n        });\r\n    \r\n        return(\r\n\r\n        <div className=\"container mt-6 text-center align-self-center full\">\r\n            <div className=\"row text-center justify-content-center\">\r\n            <div className=\"col-12 heading\">\r\n                <h3>Issue Log</h3>\r\n                <Table striped bordered hover responsive>\r\n        <thead>\r\n           <tr>\r\n            <th>S.No.</th>\r\n            <th>Name of Student</th>\r\n            <th>Roll No.</th>\r\n            <th>Name of Book</th>\r\n            <th>ISBN number</th>\r\n            <th>Issue Date</th>\r\n            <th>Return Deadline</th>\r\n            <th>Return status</th> \r\n            <th>Fine (in Rs.)</th> \r\n           </tr>\r\n        </thead>\r\n        <tbody>\r\n            {list}\r\n        </tbody>\r\n        </Table>\r\n            <br/>\r\n           \r\n            <br/>\r\n            </div>\r\n            </div>\r\n            </div>\r\n        );\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default Log;"]},"metadata":{},"sourceType":"module"}